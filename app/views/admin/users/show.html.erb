<% content_for :main_wrapper_class do %>
  sidebar-collapsed
<% end %>

<% content_for :title do %>Invite Users<% end %>

<section class='main-content-header'>
  <h1>Invite Users</h1>
</section>

<section class='main-content'>

  <div class='row'>
    <div class='col-sm-3'>
      <div class='panel'>
        <%= render 'nav/profile' %>
      </div>
    </div>
    <div class='col-sm-8'>

      <div class='panel'>
        <%= bootstrap_form_for :user, remote: true do |f| %>
          <%= f.email_field :email, label: 'Invite a user to Sonar', placeholder: 'Email address' %>
          <%= f.hidden_field :company_id, value: @company_id %>
          <%= f.form_group :role do %>
            <%= f.check_box :role, {name: 'user[role]', label: "Make this user an admin"}, 'admin', 'user' %>
          <% end %>
          <%= f.submit "Send Invite", class: 'btn btn-dark-blue btn-invite_user' %>
        <% end %>

        <div class='table-responsive'>
          <table class='table table-hover user-table'>
            <tr>
              <th>Users</th>
              <th>Admin</th>
              <th>Actions</th>
            </tr>

            <% @users.each do |user| %>
              <tr class='user-line'>
                <td><%= user.email %></td>
                <td>
                  <%= check_box_tag("is_admin", user.is_admin?, user.is_admin?, { class: 'user-role', 'data-user-id': user.id}) %>
                </td>
                <td><a data-toggle="modal" data-target="#delete_with_ajax" data-user-id=<%= user.id %>><i class="fa fa-ftl fa-trash-o"></i></a></td>
              </tr>
            <% end %>
          </table>
        </div>
      </div>
    </div>
  </div>

</section>

<%= render partial: 'admin/users/partials/user_template' %>
<%= render partial: 'utility/delete_with_ajax_modal', locals: {delete_item: 'user'} %>

